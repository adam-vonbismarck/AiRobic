# ConvertToJson Class Documentation

## Table of Contents

* [1. Overview](#1-overview)
* [2. `convert(Schedule schedule)` Method](#2-convert-schedule-schedule-method)


## 1. Overview

The `ConvertToJson` class provides a single static method, `convert()`,  for transforming a `Schedule` object into a JSON string representation.  This class is part of the `edu.brown.cs.student.main.handlers` package and utilizes several models from the `edu.brown.cs.student.main.models` package including `Schedule`, `Week`, `Day`, and `Emission`.


## 2. `convert(Schedule schedule)` Method

This method takes a `Schedule` object as input and returns its JSON representation as a String.  The JSON structure represents the schedule's weeks, days, and workout emissions.

**Method Signature:**

```java
public static String convert(Schedule schedule)
```

**Algorithm:**

The algorithm iterates through the `Schedule`, `Week`, and `Day` objects to build the JSON string using a `StringBuilder`. The core logic can be broken down as follows:

1. **Initialization:** A `StringBuilder` named `jsonString` is initialized with an opening curly brace `"{"` to start the JSON object.

2. **Week and Day Iteration:** The method iterates through each `Week` in the input `Schedule` and then each `Day` within each `Week`.  An assertion ensures that each `Day` has a non-empty date.  The date is formatted using `DateTimeFormatter.ofPattern("MM-dd-yyyy")` and included in the JSON as a key.

3. **Emission Iteration:** For each `Day`, the method iterates through its `Emission` objects. Each `Emission` is added to the JSON as a nested object with keys `"workout"` and `"duration"` representing the workout name and duration respectively. An emission counter is used to create unique keys for each emission within a day.

4. **Comma Handling:**  Commas are strategically added to separate different days and emissions within the JSON structure.  Specifically, a comma is added:
    * After each emission, except the last one in a day.
    * After each day, except the last one in a week.
    * If a day contains no emissions.

5. **JSON Object Completion:**  After processing all weeks and days, a closing curly brace `"}"` is appended to complete the JSON object.

6. **Return Value:** The method returns the complete JSON string generated by the `StringBuilder`.

**Example JSON Output (Illustrative):**

For a `Schedule` with data representing several days with workout emissions, the output JSON might look like this (note that the exact output depends on the contents of the input `Schedule` object):

```json
{
"01-01-2024":{
"1":{"workout":"Weightlifting","duration":60},
"2":{"workout":"Running","duration":30}
},
"01-02-2024":{
"1":{"workout":"Swimming","duration":45}
},
"01-03-2024":{}
}
```

**Note:**  Error handling for invalid input (e.g., null `Schedule` object) is not explicitly included in this method.  Robust error handling would be a beneficial addition in a production environment.
